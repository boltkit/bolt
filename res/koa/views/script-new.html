<%- include('_header.html') %>

<script>
  
  function addVar() {
    let nexLine = document.createElement("div");
    let id = document.getElementsByClassName("script-var").length;
    if (id < 5) {
      nexLine.innerHTML = `
      <div id="script-var-${id}" class="input-group script-var">
        <div class="input-group-prepend">
          <span class="input-group-text" id="">#${id}</span>
        </div>
        <input type="text" class="form-control" id="vars_${id}_name" name="vars_name[]" placeholder="name"/>
        <input type="text" class="form-control" id="vars_${id}_value" name="vars_value[]" placeholder="value"/>
        <button type="button" class="btn btn-danger" onclick="rmVar(${id}); return false;">remove</button>
        <button type="button" class="btn btn-primary" onclick="addVar(); return false;">add variable</button>
      </div>
      `;
      document.getElementById('script-vars').append(nexLine);
    }
  }

  function rmVar(id) {
    document.getElementById(`script-var-${id}`).remove()
  }

    
</script>

<style>
pre.src {
  color: white;
  background-color: black;
  padding: 13px;
  border-radius: 3px;
}
</style>


<!--
<%- include('_breadcrumbs.html', {items: [
  {title: "Home", uri: "/"},
  {title: "Scripts", uri: "/scripts"},
  {title: "New", uri: `/scripts/new`, status: ""}
]}) %>
-->


<form action="/scripts" method="post">

  <fieldset>
    <legend>Create script</legend>

    <div class="mb-3">
      <label for="name" class="form-label">Script name</label>
      <input type="text" class="form-control" id="name" name="name" placeholder="source name" value="">
    </div>

    <div class="mb-3">
      <label for="description" class="form-label">Description</label>
      <textarea id="description" class="form-control" name="description" rows="10" style="width:100%"></textarea>
    </div>
    
    <div class="mb-3">
      <label for="src" class="form-label">Source</label>
      <textarea id="src" class="form-control" name="src" rows="10" style="width:100%"></textarea>
    </div>
    
    <!--div class="mb-3">
      <label for="" class="form-label">Environment variables</label>

      <div id="script-vars">
        <div id="script-var-0" class="input-group script-var">
          <div class="input-group-prepend">
            <span class="input-group-text" id="">#0</span>
          </div>
          <input type="text" class="form-control" id="vars_0_name" name="vars_name[]" placeholder="name"/>
          <input type="text" class="form-control" id="vars_0_value" name="vars_value[]" placeholder="value"/>
          <button type="button" class="btn btn-danger disabled" onclick="rmVar(0); return false;">remove</button>
          <button type="button" class="btn btn-primary" onclick="addVar(); return false;">add variable</button>
        </div>
      </div>

    </div-->
    
    <div class="mb-3">
      <input type="submit" class="btn btn-primary" value="create script"/>
    </div>
  </fieldset>
  
  
</form>

<%- include('_footer.html') %>

