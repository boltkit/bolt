<%- include('_header.html') %>

<style>
pre.src {
  color: white;
  background-color: black;
  padding: 13px;
  border-radius: 3px;
}
</style>


<!--
<%- include('_breadcrumbs.html', {items: [
  {title: "Home", uri: "/"},
  {title: "Scripts", uri: "/scripts"},
  {title: script.id, uri: `/scripts/${script.id}`, status: ""}
]}) %>
-->

<div>
  <h3 class="page-title">scripts / <%= script.name %> (version #<%= script.versions.length %>)</h3>
  <p class="page-title">
  <%= script.description %>
  </p>
</div>

<div class="script-nav">
  <ul class="nav nav-pills justify-content-center">
    <li class="nav-item">
      <a class="nav-link" href="<%= `/scripts/${script.slug || script.id}` %>">Overview</a>
    </li>
    <li class="nav-item">
      <a class="nav-link active" href="<%= `/scripts/${script.slug || script.id}/edit` %>">Source</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="<%= `/scripts/${script.slug || script.id}/vars` %>">Variables</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="<%= `/scripts/${script.slug || script.id}/pipelines` %>">Pipelines</a>
    </li>
  </ul>
</div>

<form action="/scripts" method="post">

  <fieldset>

    <input type="hidden" name="id" value="<%= script.id %>" />

    <div class="mb-3">
      <label for="name" class="form-label">Script name</label>
      <input type="text" class="form-control" id="name" name="name" placeholder="source name" value="<%= script.name %>">
    </div>

    <div class="mb-3">
      <label for="slug" class="form-label">Unique Slug</label>
      <input id="slug" class="form-control" name="slug" rows="10" style="width:100%" value="<%= script.slug %>"/>
    </div>

    <div class="mb-3">
      <label for="description" class="form-label">Description</label>
      <textarea id="description" class="form-control" name="description" rows="10" style="width:100%"><%= script.description %></textarea>
    </div>
    
    <div class="mb-3">
      <label for="src" class="form-label">Source</label>
      <textarea id="src" class="form-control" name="src" rows="10" style="width:100%"><%= script.lastVersion.srcYml %></textarea>
    </div>
    
    <div class="mb-3">
      <input type="submit" class="btn btn-primary" value="update"/>
    </div>
  </fieldset>
  
  
</form>

<%- include('_footer.html') %>

